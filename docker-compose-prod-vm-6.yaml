version: '3.5'

networks:
  web-app-net:
    name: my-web-app-net
    #driver: overlay
    driver: bridge

services:  
  enrolment-deferment-exemption:
    image: engrajibkumerghosh/ms-training-repo-v1:enrolment-deferment-exemption-v1.0.8
    environment:
      management.endpoints.web.exposure.include: health,metrics,httptrace,prometheus
      app.eureka.service.host: eureka-service-discovery
      app.eureka.service.port: 801
      app.db.host: pg-enrolmentDB
      app.db.port: 5432
      app.db.name: enrolmentDB
      app.db.username: root
      app.db.password: root@123
      app.zookeeper.host: zookeeper
      app.zookeeper.port: 2181
      app.kafka.host: kafka
      app.kafka.port: 9092
    ports:
      - 8087:8087
    depends_on:
      - eureka-service-discovery
    restart: on-failure
    networks:
      - web-app-net

  medical-screening:
    image: engrajibkumerghosh/ms-training-repo-v1:medical-screening-v1.0.8
    environment:
      management.endpoints.web.exposure.include: health,metrics,httptrace,prometheus
      app.eureka.service.host: eureka-service-discovery
      app.eureka.service.port: 801
      app.db.host: pg-medicalDB
      app.db.port: 5432
      app.db.name: medicalDB
      app.db.username: root
      app.db.password: root@123
      app.zookeeper.host: zookeeper
      app.zookeeper.port: 2181
      app.kafka.host: kafka
      app.kafka.port: 9092
    ports:
      - 8088:8088
    depends_on:
      - eureka-service-discovery
    restart: on-failure
    networks:
      - web-app-net
      
#end of scripts